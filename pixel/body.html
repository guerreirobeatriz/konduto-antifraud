<script>
	window.__kdt = window.__kdt || []
	__kdt.push({ public_key: '{{settings.kondutoId}}' })
	__kdt.push({ post_on_load: false })
	;(function() {
		var kdt = document.createElement('script')
		kdt.id = 'kdtjs'
		kdt.type = 'text/javascript'
		kdt.async = true
		kdt.src = 'https://i.k-analytix.com/k.js'
		var s = document.getElementsByTagName('body')[0]
		s.parentNode.insertBefore(kdt, s)
	})()
	;(function() {
		var period = 300
		var limit = 20 * 1e3
		var nTry = 0
		var intervalID = setInterval(function() {
			var clear = limit / period <= ++nTry
			if (typeof Konduto !== 'undefined' && Konduto.sendEvent) {
				setKondutoFingerPrint()
				clear = true
			}
			if (clear) {
				clearInterval(intervalID)
			}
		}, period)
	})()
	var setKondutoFingerPrint = function() {
		var kdtFP = Konduto.getVisitorID()
		window.vtex.deviceFingerprint = kdtFP
		Konduto.sendEvent('page', 'checkout')
	}
</script>
